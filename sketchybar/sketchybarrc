PLUGIN_DIR="$CONFIG_DIR/plugins"

bar=(
  height=30
  blur_radius=90
  position=top
  color=0x900f0f0f
  border_width=0
  border_color=0x750f0f0f
  margin=0
  notch_display_height=38
  notch_offset=0
  sticky=true
  font_smoothing=on
  topmost=window
)
sketchybar --bar "${bar[@]}"

default=(
  icon.font="Lilex:Regular:13"
  label.font="Lilex:Regular:13"
  icon.color=0xffEDEDED
  label.color=0xffEDEDED
  icon.padding_left=6
  icon.padding_right=6
)
sketchybar --default "${default[@]}"

sketchybar --add event aerospace_workspace_change

# sketchybar --add item sep_left center \
#            --set sep_left icon="{" icon.y_offset=2 icon.padding_left=2 icon.padding_right=2 icon.color=0x80EDEDED label.drawing=off icon.font.style="Normal"\
# 
# for sid in $(aerospace list-workspaces --all); do
#     sketchybar --add item space.$sid center \
#         --subscribe space.$sid aerospace_workspace_change \
#         --set space.$sid \
#         icon="*" \
#         label.drawing=off \
#         icon.y_offset=2 \
#         click_script="aerospace workspace $sid" \
#         script="$PLUGIN_DIR/aerospace.sh $sid"
# done
# 
# sketchybar --add item sep_right center \
#            --set sep_right icon="}" icon.y_offset=2 icon.padding_left=2 icon.padding_right=2 icon.color=0x80EDEDED label.drawing=off icon.font.style="Normal"\

# LEFT BLOCK - Secondary monitor workspaces (1^, 2^)

sketchybar --add item sep_secondary_left center \
           --set sep_secondary_left \
                 icon="{" \
                 icon.y_offset=2 \
                 icon.padding_left=2 \
                 icon.padding_right=1 \
                 icon.color=0x80EDEDED \
                 label.drawing=off \
                 icon.font.style="Normal"
for sid in "1^" "2^"; do
    sketchybar --add item space.$sid center \
        --subscribe space.$sid aerospace_workspace_change \
        --set space.$sid \
        icon="^" \
        label.drawing=off \
        icon.y_offset=2 \
        click_script="aerospace workspace $sid" \
        script="$PLUGIN_DIR/aerospace.sh"
done
sketchybar --add item sep_secondary_right center \
           --set sep_secondary_right \
                 icon="}" \
                 icon.y_offset=2 \
                 icon.padding_left=1 \
                 icon.padding_right=2 \
                 icon.color=0x80EDEDED \
                 label.drawing=off \
                 icon.font.style="Normal"

# CENTER BLOCK - Main monitor workspaces (1*, 2*, 3*)

sketchybar --add item sep_main_left center \
           --set sep_main_left \
                 icon="[" \
                 icon.y_offset=2 \
                 icon.padding_left=8 \
                 icon.padding_right=1 \
                 icon.color=0x80EDEDED \
                 label.drawing=off \
                 icon.font.style="Normal"
for sid in "1*" "2*" "3*"; do
    sketchybar --add item space.$sid center \
        --subscribe space.$sid aerospace_workspace_change \
        --set space.$sid \
        icon="*" \
        label.drawing=off \
        icon.y_offset=2 \
        click_script="aerospace workspace $sid" \
        script="$PLUGIN_DIR/aerospace.sh"
done
sketchybar --add item sep_main_right center \
           --set sep_main_right \
                 icon="]" \
                 icon.y_offset=2 \
                 icon.padding_left=1 \
                 icon.padding_right=8 \
                 icon.color=0x80EDEDED \
                 label.drawing=off \
                 icon.font.style="Normal"

# RIGHT BLOCK - Laptop screen workspaces (1~, 2~)

sketchybar --add item sep_laptop_left center \
           --set sep_laptop_left \
                 icon="{" \
                 icon.y_offset=2 \
                 icon.padding_left=2 \
                 icon.padding_right=1 \
                 icon.color=0x80EDEDED \
                 label.drawing=off \
                 icon.font.style="Normal"
for sid in "1~"; do
    sketchybar --add item space.$sid center \
        --subscribe space.$sid aerospace_workspace_change \
        --set space.$sid \
        icon="~" \
        label.drawing=off \
        icon.y_offset=2 \
        click_script="aerospace workspace $sid" \
        script="$PLUGIN_DIR/aerospace.sh"
done
sketchybar --add item sep_laptop_right center \
           --set sep_laptop_right \
                 icon="}" \
                 icon.y_offset=2 \
                 icon.padding_left=1 \
                 icon.padding_right=2 \
                 icon.color=0x80EDEDED \
                 label.drawing=off \
                 icon.font.style="Normal"

##### Force all scripts to run the first time (never do this in a script) #####
sketchybar --update
